<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Defining Tables for GaussSuppression â€¢ GaussSuppression</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Defining Tables for GaussSuppression">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GaussSuppression</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/define_tables.html">Defining Tables for GaussSuppression</a></li>
    <li><a class="dropdown-item" href="../articles/Magnitude_table_suppression.html">Magnitude table suppression</a></li>
    <li><a class="dropdown-item" href="../articles/Small_count_frequency_table_suppression.html">Small count frequency table suppression</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-gausssuppression/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="define_tables_files/kePrint-0.0.1/kePrint.js"></script><link href="define_tables_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Defining Tables for GaussSuppression</h1>
                        <h4 data-toc-skip class="author"></h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-gausssuppression/blob/main/vignettes/define_tables.Rmd" class="external-link"><code>vignettes/define_tables.Rmd</code></a></small>
      <div class="d-none name"><code>define_tables.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction-and-setup">Introduction and setup<a class="anchor" aria-label="anchor" href="#introduction-and-setup"></a>
</h2>
<p>The <code>GaussSuppression</code> package uses a common interface
shared by other SDC packages developed at Statistics Norway (see also <a href="https://cran.r-project.org/package=SmallCountRounding" class="external-link"><code>SmallCountRounding</code></a>
and <a href="https://github.com/statisticsnorway/ssb-ssbcellkey" class="external-link"><code>SSBcellKey</code></a>).
In the background, these packages use a <em>model matrix</em>
representation, which connects the input data to the intended output.
This functionality is provided by the R package <code>SSBtools</code>.
In this vignette, we look at multiple ways of specifying output tables
given different forms of input. Note that this vignette only scratches
the surface of what is possible with the provided interface, and rather
is intended to help users get going with the package.</p>
<p>We begin by importing the necessary dependencies as well as loading a
test data set provided in the SSBtools package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/statisticsnorway/ssb-ssbtools" class="external-link">SSBtools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/statisticsnorway/ssb-gausssuppression" class="external-link">GaussSuppression</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">dataset</span> <span class="op">&lt;-</span> <span class="fu">SSBtools</span><span class="fu">::</span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"d2s"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">microdata</span> <span class="op">&lt;-</span> <span class="fu">SSBtools</span><span class="fu">::</span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/MakeFreq.html" class="external-link">MakeMicro</a></span><span class="op">(</span><span class="va">dataset</span>, <span class="st">"freq"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span>
<span><span class="co">#&gt;   region   county  size main_income freq</span></span>
<span><span class="co">#&gt; 1      A county-1   BIG       other    2</span></span>
<span><span class="co">#&gt; 2      B county-2   BIG       other    3</span></span>
<span><span class="co">#&gt; 3      C county-2   BIG       other    5</span></span>
<span><span class="co">#&gt; 4      D county-1 small       other    3</span></span>
<span><span class="co">#&gt; 5      E county-3 small       other    9</span></span>
<span><span class="co">#&gt; 6      F county-3 small       other    4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 24</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">microdata</span><span class="op">)</span></span>
<span><span class="co">#&gt;   region   county size main_income freq</span></span>
<span><span class="co">#&gt; 1      A county-1  BIG       other    1</span></span>
<span><span class="co">#&gt; 2      A county-1  BIG       other    1</span></span>
<span><span class="co">#&gt; 3      B county-2  BIG       other    1</span></span>
<span><span class="co">#&gt; 4      B county-2  BIG       other    1</span></span>
<span><span class="co">#&gt; 5      B county-2  BIG       other    1</span></span>
<span><span class="co">#&gt; 6      C county-2  BIG       other    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">microdata</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 338</span></span></code></pre></div>
<p>The imported data set is a fictitious data set containing the
variables: region, county, size, main_income, freq, where region,
county, and size are different (non-nested) regional hierarchies.
<code>GaussSuppression</code> can take microdata as input as well, which
we will demonstrate in the following sections.</p>
<p>The table below illustrates this dataset reshaped to wide format with
several <code>freq</code> columns created from the
<code>main_income</code> variable. However, please note that data that
is input and output in the <code>GaussSuppression</code> package is
always in long format.</p>
<br><table class="table table table-bordered" style="font-size: 14px; width: auto !important; ">
<caption style="font-size: initial !important;">
<strong>Table 1</strong>: <code>dataset</code> reshaped to wide format.
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: white !important;padding-right: 4px; padding-left: 4px; background-color: rgba(0, 130, 77, 255) !important;" colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
regional variables
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; color: white !important;padding-right: 4px; padding-left: 4px; background-color: rgba(0, 130, 77, 255) !important;" colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
main_income
</div>
</th>
</tr>
<tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
county
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
size
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
BIG
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
2
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
11
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
55
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
36
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
BIG
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
3
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
1
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
29
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
18
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
BIG
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
5
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
8
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
35
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
25
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
small
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
3
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
0
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
9
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
2
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
small
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
9
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
0
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
32
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
20
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
small
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
4
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
2
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
18
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
11
</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div class="section level2">
<h2 id="defining-table-dimensions">Defining Table Dimensions<a class="anchor" aria-label="anchor" href="#defining-table-dimensions"></a>
</h2>
<p>Output tables are mainly specified using the following three
parameters: <code>dimVar</code>, <code>hierarchies</code>, and
<code>formula</code>.</p>
<div class="section level3">
<h3 id="creating-tables-using-dimvar">Creating tables using <code>dimVar</code><a class="anchor" aria-label="anchor" href="#creating-tables-using-dimvar"></a>
</h3>
<p>The most basic way of defining output tables is by using the
<code>dimVar</code> parameter. This generates by default all
combinations of the variables provided, including marginals. For
example, the following function call creates a one dimensional frequency
table over the variable region.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                         dimVar <span class="op">=</span> <span class="st">"region"</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;   region freq primary suppressed</span></span>
<span><span class="co">#&gt; 1  Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2      A  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3      B   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4      C   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5      D   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6      E   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7      F   35   FALSE      FALSE</span></span></code></pre></div>
The same output is shown below as a formatted table.<br><br><p style="text-align: center;">
<font size="3"> <strong>Table 2</strong>: <code>dimVar = "region"</code>
</font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Note the use of the function GaussSuppressionFromData and the
inclusion of two parameters <code>primary</code> and
<code>protectZeros</code>. The functions in
<code>GaussSuppression</code> are designed to incorporate both table
building and protection into a single function call. Thus, to illustrate
the table building features, we have set that nothing must be protected.
To learn more about the different ways of protecting tables, see the
other vignettes of this package.</p>
<p>In a similar fashion, we can include multiple variables in the
<code>dimVar</code> parameter:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                         dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"main_income"</span><span class="op">)</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;    region main_income freq primary suppressed</span></span>
<span><span class="co">#&gt; 1   Total       Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2   Total  assistance  178   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3   Total       other   26   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4   Total    pensions  112   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5   Total       wages   22   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6       A       Total  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7       A  assistance   55   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8       A       other    2   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9       A    pensions   36   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10      A       wages   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11      B       Total   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12      B  assistance   29   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 13      B       other    3   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 14      B    pensions   18   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 15      B       wages    1   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 16      C       Total   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 17      C  assistance   35   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 18      C       other    5   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 19      C    pensions   25   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 20      C       wages    8   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 21      D       Total   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 22      D  assistance    9   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 23      D       other    3   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 24      D    pensions    2   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 25      D       wages    0   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 26      E       Total   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 27      E  assistance   32   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 28      E       other    9   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 29      E    pensions   20   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 30      E       wages    0   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 31      F       Total   35   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 32      F  assistance   18   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 33      F       other    4   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 34      F    pensions   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 35      F       wages    2   FALSE      FALSE</span></span></code></pre></div>
<p>The same output is shown below as a formatted and reshaped table.
Cells that also occur as input/inner cells have white background.<br><br></p>
<table class="table table table-bordered" style="font-size: 14px; ">
<caption style="font-size: initial !important;">
<strong>Table 3</strong>:
<code>dimVar = c("region", "main_income")</code>
</caption>
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">55</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">36</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">3</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">1</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">29</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">18</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">5</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">8</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">35</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">25</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">3</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">0</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">9</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">9</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">0</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">32</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">20</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">4</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">18</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">26</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">22</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">178</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">112</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Note in particular what happens when we provide two regional
variables:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                         dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"county"</span><span class="op">)</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      region freq primary suppressed</span></span>
<span><span class="co">#&gt; 1     Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2  county-1  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3  county-2  124   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4  county-3   96   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5         A  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6         B   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7         C   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8         D   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9         E   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10        F   35   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 4</strong>:
<code>dimVar = c("region", "county")</code> </font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">118</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">124</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">96</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>The function detects hierarchies encoded in <code>dimVar</code>
columns, and collapses them into a single column (with the name of the
most detailed variable). In this way, it is not necessary to specify
hierarchies by hand and include them explicitly in the function call.
This also works for non-nested hierarchies:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                         dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"county"</span>, <span class="st">"size"</span><span class="op">)</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      region freq primary suppressed</span></span>
<span><span class="co">#&gt; 1       BIG  228   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2  county-1  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3  county-2  124   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4  county-3   96   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5     small  110   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6     Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7         A  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8         B   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9         C   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10        D   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11        E   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12        F   35   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 5</strong>:
<code>dimVar = c("region", "county", "size")</code> </font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">118</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">124</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">96</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
small
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">110</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
BIG
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">228</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p>We can combine all the dimensional variables in our example data:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                                   dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"county"</span>, <span class="st">"size"</span>, <span class="st">"main_income"</span><span class="op">)</span>,</span>
<span>                                   freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                                   primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                   protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">output</span><span class="op">)</span></span>
<span><span class="co">#&gt;     region main_income freq primary suppressed</span></span>
<span><span class="co">#&gt; 1      BIG       Total  228   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2      BIG  assistance  119   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3      BIG       other   10   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4      BIG    pensions   79   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5      BIG       wages   20   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6 county-1       Total  118   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 6</strong>:
<code>dimVar = c("region", "county", "size", "main_income")</code>
</font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">55</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">36</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">3</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">1</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">29</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">18</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">5</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">8</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">35</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">25</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">3</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">0</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">9</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">9</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">0</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">32</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">20</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">4</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">18</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">5</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">11</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">64</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">38</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">118</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">8</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">9</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">64</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">43</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">124</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">13</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">2</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">50</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">31</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">96</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
small
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">16</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">2</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">59</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">33</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">110</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
BIG
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">10</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">20</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">119</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">79</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">228</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">26</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">22</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">178</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">112</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br>
In the background, functions from SSBtools are used to find the
hierarchies. There are multiple ways of inspecting which hierarchies can
be found; users familiar with DimLists used in other SDC packages can
for example use the following:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FindDimLists.html" class="external-link">FindDimLists</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"county"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; $region</span></span>
<span><span class="co">#&gt;    levels    codes</span></span>
<span><span class="co">#&gt; 1       @    Total</span></span>
<span><span class="co">#&gt; 2      @@ county-1</span></span>
<span><span class="co">#&gt; 3     @@@        A</span></span>
<span><span class="co">#&gt; 4     @@@        D</span></span>
<span><span class="co">#&gt; 5      @@ county-2</span></span>
<span><span class="co">#&gt; 6     @@@        B</span></span>
<span><span class="co">#&gt; 7     @@@        C</span></span>
<span><span class="co">#&gt; 8      @@ county-3</span></span>
<span><span class="co">#&gt; 9     @@@        E</span></span>
<span><span class="co">#&gt; 10    @@@        F</span></span>
<span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FindDimLists.html" class="external-link">FindDimLists</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"county"</span>, <span class="st">"size"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; $region</span></span>
<span><span class="co">#&gt;    levels    codes</span></span>
<span><span class="co">#&gt; 1       @    Total</span></span>
<span><span class="co">#&gt; 2      @@ county-1</span></span>
<span><span class="co">#&gt; 3     @@@        A</span></span>
<span><span class="co">#&gt; 4     @@@        D</span></span>
<span><span class="co">#&gt; 5      @@ county-2</span></span>
<span><span class="co">#&gt; 6     @@@        B</span></span>
<span><span class="co">#&gt; 7     @@@        C</span></span>
<span><span class="co">#&gt; 8      @@ county-3</span></span>
<span><span class="co">#&gt; 9     @@@        E</span></span>
<span><span class="co">#&gt; 10    @@@        F</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $region</span></span>
<span><span class="co">#&gt;   levels codes</span></span>
<span><span class="co">#&gt; 1      @ Total</span></span>
<span><span class="co">#&gt; 2     @@   BIG</span></span>
<span><span class="co">#&gt; 3    @@@     A</span></span>
<span><span class="co">#&gt; 4    @@@     B</span></span>
<span><span class="co">#&gt; 5    @@@     C</span></span>
<span><span class="co">#&gt; 6     @@ small</span></span>
<span><span class="co">#&gt; 7    @@@     D</span></span>
<span><span class="co">#&gt; 8    @@@     E</span></span>
<span><span class="co">#&gt; 9    @@@     F</span></span></code></pre></div>
<p>Note the last example which contained non-nested hierarchies. Here, a
unique DimList is created for each tree-shaped hierarchy in the data
set. This avoids the need for specifying non-nested hierarchies as
linked tables.</p>
<p>Finally, for illustration purposes, we see that the same function
calls work with microdata as input:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"county"</span>, <span class="st">"size"</span><span class="op">)</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      region freq primary suppressed</span></span>
<span><span class="co">#&gt; 1       BIG  228   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2  county-1  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3  county-2  124   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4  county-3   96   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5     small  110   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6     Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7         A  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8         B   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9         C   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10        D   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11        E   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12        F   35   FALSE      FALSE</span></span></code></pre></div>
<p>This output is the same as illustrated in Table 5 above.</p>
</div>
<div class="section level3">
<h3 id="creating-tables-using-hierarchies">Creating tables using <code>hierarchies</code><a class="anchor" aria-label="anchor" href="#creating-tables-using-hierarchies"></a>
</h3>
<p>The <code>hierarchies</code> parameter allows the explicit
specification of which hierarchies should be used when creating the
output table. This allows for a more fine-grained approach as opposed to
simply using <code>dimVar</code>, as it allows for applying hierarchies
not already present in the data set. Hierarchies can be provided in many
ways. In this vignette, we will exemplify the following three forms: as
a dimlist (as defined in <code>sdcTable</code>), using the hrc format
from TauArgus, and finally with a more general hierarchy specification
(internally, not surprisingly, simply called hierarchy). Any of these
can be provided to the <code>hierarchies</code> parameter, as they are
all translated to the internal hierarchy representation. For the
purposes of this vignette, we will use dimlists, however in the
following example we shall see how these can be translated to one
another using functions from <code>SSBtools</code>. Let us begin by
defining two hierarchies by using dimlists:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">region_dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"@"</span>, <span class="st">"@@"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"@@@"</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"@@"</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                         codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Total"</span>, <span class="st">"AB"</span>, <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">region_dim</span></span>
<span><span class="co">#&gt;   levels codes</span></span>
<span><span class="co">#&gt; 1      @ Total</span></span>
<span><span class="co">#&gt; 2     @@    AB</span></span>
<span><span class="co">#&gt; 3    @@@     A</span></span>
<span><span class="co">#&gt; 4    @@@     B</span></span>
<span><span class="co">#&gt; 5     @@     C</span></span>
<span><span class="co">#&gt; 6     @@     D</span></span>
<span><span class="co">#&gt; 7     @@     E</span></span>
<span><span class="co">#&gt; 8     @@     F</span></span>
<span></span>
<span><span class="va">income_dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"@"</span>, <span class="st">"@@"</span>, <span class="st">"@@"</span>, <span class="st">"@@@"</span>, <span class="st">"@@@"</span>, <span class="st">"@@@"</span><span class="op">)</span>,</span>
<span>                         codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Total"</span>, <span class="st">"wages"</span>, <span class="st">"not_wages"</span>, <span class="st">"other"</span>, <span class="st">"assistance"</span>, <span class="st">"pensions"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">income_dim</span></span>
<span><span class="co">#&gt;   levels      codes</span></span>
<span><span class="co">#&gt; 1      @      Total</span></span>
<span><span class="co">#&gt; 2     @@      wages</span></span>
<span><span class="co">#&gt; 3     @@  not_wages</span></span>
<span><span class="co">#&gt; 4    @@@      other</span></span>
<span><span class="co">#&gt; 5    @@@ assistance</span></span>
<span><span class="co">#&gt; 6    @@@   pensions</span></span>
<span><span class="fu">SSBtools</span><span class="fu">::</span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/DimList2Hrc.html" class="external-link">DimList2Hrc</a></span><span class="op">(</span><span class="va">income_dim</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "wages"       "not_wages"   "@other"      "@assistance" "@pensions"</span></span>
<span><span class="fu">SSBtools</span><span class="fu">::</span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/DimList2Hierarchy.html" class="external-link">DimList2Hierarchy</a></span><span class="op">(</span><span class="va">income_dim</span><span class="op">)</span></span>
<span><span class="co">#&gt;     mapsFrom    mapsTo sign level</span></span>
<span><span class="co">#&gt; 1      wages     Total    1     2</span></span>
<span><span class="co">#&gt; 2  not_wages     Total    1     2</span></span>
<span><span class="co">#&gt; 3      other not_wages    1     1</span></span>
<span><span class="co">#&gt; 4 assistance not_wages    1     1</span></span>
<span><span class="co">#&gt; 5   pensions not_wages    1     1</span></span></code></pre></div>
<p>We can use these hierarchies to specify our output table. We do this
by supplying a named list to the <code>hierarchies</code> parameter,
where the list names correspond to variables in the data, and the list
elements correspond to hierarchies we wish to include.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                         hierarchies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region <span class="op">=</span> <span class="va">region_dim</span>, main_income <span class="op">=</span> <span class="va">income_dim</span><span class="op">)</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;    region main_income freq primary suppressed</span></span>
<span><span class="co">#&gt; 1   Total       Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2   Total   not_wages  316   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3   Total  assistance  178   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4   Total       other   26   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5   Total    pensions  112   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6   Total       wages   22   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7      AB       Total  155   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8      AB   not_wages  143   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9      AB  assistance   84   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10     AB       other    5   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11     AB    pensions   54   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12     AB       wages   12   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 13      A       Total  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 14      A   not_wages   93   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 15      A  assistance   55   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 16      A       other    2   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 17      A    pensions   36   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 18      A       wages   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 19      B       Total   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 20      B   not_wages   50   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 21      B  assistance   29   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 22      B       other    3   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 23      B    pensions   18   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 24      B       wages    1   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 25      C       Total   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 26      C   not_wages   65   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 27      C  assistance   35   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 28      C       other    5   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 29      C    pensions   25   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 30      C       wages    8   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 31      D       Total   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 32      D   not_wages   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 33      D  assistance    9   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 34      D       other    3   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 35      D    pensions    2   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 36      D       wages    0   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 37      E       Total   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 38      E   not_wages   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 39      E  assistance   32   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 40      E       other    9   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 41      E    pensions   20   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 42      E       wages    0   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 43      F       Total   35   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 44      F   not_wages   33   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 45      F  assistance   18   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 46      F       other    4   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 47      F    pensions   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 48      F       wages    2   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 7</strong>:
<code>hierarchies = list(region = region_dim, main_income = income_dim)</code>
</font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
not_wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">55</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">36</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">93</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">3</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">1</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">29</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">18</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">50</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">5</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">8</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">35</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">25</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">65</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">3</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">0</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">9</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">14</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">9</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">0</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">32</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">20</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">61</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">4</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">18</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">33</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
AB
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">5</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">12</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">84</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">54</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">143</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">155</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">26</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">22</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">178</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">112</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">316</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br>
As mentioned previously, the <code>GaussSuppression</code> package
supports non-nested hierarchies natively. We achieve this by having
multiple elements with the same name in the <code>hierarchies</code>
list:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">region2_dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"@"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"@@"</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"@@@"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"@@"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                          codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Total"</span>, <span class="st">"AD"</span>, <span class="st">"A"</span>, <span class="st">"D"</span>,  </span>
<span>                                    <span class="st">"BF"</span>, <span class="st">"B"</span>, <span class="st">"F"</span>, </span>
<span>                                    <span class="st">"C"</span>, <span class="st">"E"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">region2_dim</span></span>
<span><span class="co">#&gt;   levels codes</span></span>
<span><span class="co">#&gt; 1      @ Total</span></span>
<span><span class="co">#&gt; 2     @@    AD</span></span>
<span><span class="co">#&gt; 3    @@@     A</span></span>
<span><span class="co">#&gt; 4    @@@     D</span></span>
<span><span class="co">#&gt; 5     @@    BF</span></span>
<span><span class="co">#&gt; 6    @@@     B</span></span>
<span><span class="co">#&gt; 7    @@@     F</span></span>
<span><span class="co">#&gt; 8     @@     C</span></span>
<span><span class="co">#&gt; 9     @@     E</span></span>
<span></span>
<span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                         hierarchies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region <span class="op">=</span> <span class="va">region_dim</span>, region <span class="op">=</span> <span class="va">region2_dim</span><span class="op">)</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;    region freq primary suppressed</span></span>
<span><span class="co">#&gt; 1      AB  155   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2      AD  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3      BF   86   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4   Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5       A  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6       B   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7       C   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8       D   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9       E   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10      F   35   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 8</strong>:
<code>hierarchies = list(region = region_dim, region = region2_dim)</code>
</font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
AB
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">155</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
AD
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">118</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
BF
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">86</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p>Finally, as before, all of this functionality works with microdata as
input as well.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         hierarchies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region <span class="op">=</span> <span class="va">region_dim</span>, region <span class="op">=</span> <span class="va">region2_dim</span><span class="op">)</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;    region freq primary suppressed</span></span>
<span><span class="co">#&gt; 1      AB  155   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2      AD  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3      BF   86   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4   Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5       A  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6       B   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7       C   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8       D   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9       E   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10      F   35   FALSE      FALSE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-tables-using-formula">Creating tables using <code>formula</code><a class="anchor" aria-label="anchor" href="#creating-tables-using-formula"></a>
</h3>
<p>The most flexible method for specifying the output of
GaussSuppression is by using the <code>formula</code> interface. This
makes use of model formulas in R, and provides a powerful way of
specifying multiple different tables. Indeed, all of the above
examplesâ€”and much moreâ€”can be replicated using the formula interface.
The formulaâ€™s predictor variables must be variable names occuring in the
data set (the dependent variable is ignored, and thus we leave it
empty). In the following, we create a table based on the region and
county variables. As before, the hierarchical relationship between these
variables is detected automatically:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         formula <span class="op">=</span> <span class="op">~</span> <span class="va">region</span> <span class="op">+</span> <span class="va">county</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      region freq primary suppressed</span></span>
<span><span class="co">#&gt; 1     Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2         A  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3         B   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4         C   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5         D   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6         E   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7         F   35   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8  county-1  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9  county-2  124   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10 county-3   96   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 9</strong>:
<code>formula = ~ region + county</code> </font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">118</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">124</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">96</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>If there is no hierarchical relationship between variables,
multiplication in the <code>formula</code> and specification in
<code>dimVar</code> yield the same results.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         formula <span class="op">=</span> <span class="op">~</span> <span class="va">county</span> <span class="op">*</span> <span class="va">main_income</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      county main_income freq primary suppressed</span></span>
<span><span class="co">#&gt; 1     Total       Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2  county-1       Total  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3  county-2       Total  124   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4  county-3       Total   96   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5     Total  assistance  178   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6     Total       other   26   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7     Total    pensions  112   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8     Total       wages   22   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9  county-1  assistance   64   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10 county-1       other    5   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11 county-1    pensions   38   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12 county-1       wages   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 13 county-2  assistance   64   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 14 county-2       other    8   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 15 county-2    pensions   43   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 16 county-2       wages    9   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 17 county-3  assistance   50   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 18 county-3       other   13   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 19 county-3    pensions   31   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 20 county-3       wages    2   FALSE      FALSE</span></span>
<span>  <span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"county"</span> , <span class="st">"main_income"</span><span class="op">)</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      county main_income freq primary suppressed</span></span>
<span><span class="co">#&gt; 1     Total       Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2     Total  assistance  178   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3     Total       other   26   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4     Total    pensions  112   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5     Total       wages   22   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6  county-1       Total  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7  county-1  assistance   64   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8  county-1       other    5   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9  county-1    pensions   38   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10 county-1       wages   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11 county-2       Total  124   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12 county-2  assistance   64   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 13 county-2       other    8   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 14 county-2    pensions   43   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 15 county-2       wages    9   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 16 county-3       Total   96   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 17 county-3  assistance   50   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 18 county-3       other   13   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 19 county-3    pensions   31   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 20 county-3       wages    2   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 10</strong>:
<code>formula = ~ county * main_income</code> or
<code>dimVar = c("county" , "main_income")</code> </font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
county
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">5</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">64</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">38</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">118</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">8</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">9</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">64</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">43</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">124</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">13</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">50</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">31</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">96</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">26</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">22</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">178</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">112</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br>
However, <code>formula</code> lets us specify different shapes for our
tables. For example, if we are only interested in marginal values, we
can supply this with the use of the addition operator:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         formula <span class="op">=</span> <span class="op">~</span> <span class="va">county</span> <span class="op">+</span> <span class="va">main_income</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;     county main_income freq primary suppressed</span></span>
<span><span class="co">#&gt; 1    Total       Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2 county-1       Total  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3 county-2       Total  124   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4 county-3       Total   96   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5    Total  assistance  178   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6    Total       other   26   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7    Total    pensions  112   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8    Total       wages   22   FALSE      FALSE</span></span></code></pre></div>
The same output is shown below as a formatted and reshaped table where
empty cells means cells not included in the output.<br><p style="text-align: center;">
<font size="3"> <strong>Table 11</strong>:
<code>formula = ~ county + main_income</code> </font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
county
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">118</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">124</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">96</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">26</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">22</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">178</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">112</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br>
This example demonstrates, in fact, the ability of specifying multiple
linked tables: a one-dimensional table for county linked with a
one-dimensional table for main_income. Similarly, we can use the colon
(â€œ:â€) operator to omit row and column marginals:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         formula <span class="op">=</span> <span class="op">~</span> <span class="va">county</span><span class="op">:</span><span class="va">main_income</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      county main_income freq primary suppressed</span></span>
<span><span class="co">#&gt; 1     Total       Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2  county-1  assistance   64   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3  county-1       other    5   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4  county-1    pensions   38   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5  county-1       wages   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6  county-2  assistance   64   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7  county-2       other    8   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8  county-2    pensions   43   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9  county-2       wages    9   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10 county-3  assistance   50   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11 county-3       other   13   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12 county-3    pensions   31   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 13 county-3       wages    2   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 12</strong>:
<code>formula = ~ county:main_income</code> </font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
county
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">5</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">64</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">38</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">8</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">9</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">64</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">43</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">13</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">50</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">31</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p><br>
Using subtraction, we can omit marginals and other cells from the
output. For example, the intercept (sum over all records) can be omitted
by including <code>- 1</code> in the formula, like this:
<code>formula = county : main_income - 1</code>.</p>
<p>Using these features, we can define more complicated linked tables.
To illustrate this, let us assume we wish to publish the following:</p>
<ul>
<li>all levels of detail of main_income for all counties and sizes,</li>
<li>at the region level, we only wish to publish if the main source of
income was â€œwagesâ€ or â€œnot_wagesâ€.</li>
</ul>
<p>To do this, we begin by adding a column encoding whether the main
source of income was â€œwagesâ€ or â€œnot_wagesâ€.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dataset</span><span class="op">$</span><span class="va">income2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">$</span><span class="va">main_income</span> <span class="op">==</span> <span class="st">"wages"</span>, <span class="st">"wages"</span>, <span class="st">"not_wages"</span><span class="op">)</span></span>
<span><span class="va">microdata</span><span class="op">$</span><span class="va">income2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">microdata</span><span class="op">$</span><span class="va">main_income</span> <span class="op">==</span> <span class="st">"wages"</span>, <span class="st">"wages"</span>, <span class="st">"not_wages"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></span>
<span><span class="co">#&gt;   region   county  size main_income freq   income2</span></span>
<span><span class="co">#&gt; 1      A county-1   BIG       other    2 not_wages</span></span>
<span><span class="co">#&gt; 2      B county-2   BIG       other    3 not_wages</span></span>
<span><span class="co">#&gt; 3      C county-2   BIG       other    5 not_wages</span></span>
<span><span class="co">#&gt; 4      D county-1 small       other    3 not_wages</span></span>
<span><span class="co">#&gt; 5      E county-3 small       other    9 not_wages</span></span>
<span><span class="co">#&gt; 6      F county-3 small       other    4 not_wages</span></span></code></pre></div>
<p>Then we can specify the desired output with the following
formula:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dataset</span>,</span>
<span>                         formula <span class="op">=</span> <span class="op">~</span> <span class="va">region</span> <span class="op">*</span> <span class="va">income2</span> <span class="op">+</span> <span class="op">(</span><span class="va">county</span> <span class="op">+</span> <span class="va">size</span><span class="op">)</span> <span class="op">*</span> <span class="va">main_income</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      region main_income freq primary suppressed</span></span>
<span><span class="co">#&gt; 1     Total       Total  338   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2         A       Total  104   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3         B       Total   51   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4         C       Total   73   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5         D       Total   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6         E       Total   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7         F       Total   35   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8     Total   not_wages  316   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9     Total       wages   22   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10 county-1       Total  118   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11 county-2       Total  124   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12 county-3       Total   96   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 13      BIG       Total  228   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 14    small       Total  110   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 15    Total  assistance  178   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 16    Total       other   26   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 17    Total    pensions  112   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 18    Total       wages   22   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 19        A   not_wages   93   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 20        A       wages   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 21        B   not_wages   50   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 22        B       wages    1   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 23        C   not_wages   65   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 24        C       wages    8   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 25        D   not_wages   14   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 26        D       wages    0   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 27        E   not_wages   61   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 28        E       wages    0   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 29        F   not_wages   33   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 30        F       wages    2   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 31 county-1  assistance   64   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 32 county-1       other    5   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 33 county-1    pensions   38   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 34 county-1       wages   11   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 35 county-2  assistance   64   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 36 county-2       other    8   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 37 county-2    pensions   43   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 38 county-2       wages    9   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 39 county-3  assistance   50   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 40 county-3       other   13   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 41 county-3    pensions   31   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 42 county-3       wages    2   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 43      BIG  assistance  119   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 44      BIG       other   10   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 45      BIG    pensions   79   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 46      BIG       wages   20   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 47    small  assistance   59   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 48    small       other   16   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 49    small    pensions   33   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 50    small       wages    2   FALSE      FALSE</span></span></code></pre></div>
<br><p style="text-align: center;">
<font size="3"> <strong>Table 13</strong>:
<code>formula = ~ region * income2 + (county + size) * main_income</code>
</font>
</p>
<table class="table table table-bordered" style="font-size: 14px; ">
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
not_wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">11</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">93</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">104</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">1</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">50</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">51</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">8</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">65</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">73</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">0</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">14</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">14</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">0</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">61</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">61</span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">2</span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">33</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">35</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">5</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">11</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">64</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">38</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">118</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">8</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">9</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">64</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">43</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">124</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">13</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">2</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">50</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">31</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">96</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
small
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">16</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">2</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">59</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">33</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">110</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
BIG
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">10</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">20</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">119</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">79</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">228</span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">26</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">22</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">178</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">112</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">316</span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">338</span>
</td>
</tr>
</tbody>
</table>
<p>In this manner, we can specify multiple linked tables, each of which
can use different non-nested hierarchies. This allows the suppression
algorithm to protect all of these tables simultaneously (indeed, they
are treated as a single table internally), avoiding the need for a
stratified protection paradigm. Furthermore, the fine-grained
specification of which cells are to be published allows the secondary
suppression algorithm to protect with respect to precisely those cells
that will be published. If row and column marginals are not published,
for example, the suppression algorithm does not need to secondary
suppress with respect to these marginals. See the other vignettes in
this package for more details on setting up the protection methods.</p>
<p>Looking at the output data above Table 13, you will see that row 9 is
duplicated on row 18. The reason is that the code <code>wages</code> is
used both in the <code>main_income</code> variable and in the
<code>income2</code> variable. Currently, the formula interface does not
do any special checking for this phenomenon. The recommended practice is
to avoid such duplicate codes. When running <code>FindDimLists</code>,
you will see that this function performs checking.</p>
</div>
</div>
<div class="section level2">
<h2 id="tabulating-continuous-variables">Tabulating continuous variables<a class="anchor" aria-label="anchor" href="#tabulating-continuous-variables"></a>
</h2>
<p>In addition to defining the dimensions of the output tables, we need
to decide whether they should be frequency tables (where we count
contributing records) or magnititude tables (where we add contributing
recordsâ€™ numerical values for a given variable). All of the above
examples have been frequency tables. However, the process is exactly the
same if one wishes to construct magnititude tables; the only difference
is that one must specify the numerical variable with the help of the
parameter <code>numVar</code>.</p>
<p>Since most magnitude table suppression methods are based on comparing
unitsâ€™ contributions, the input data will most likely be supplied as
microdata. Therefore, let us add a fake numerical variable to our
microdata:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span></span>
<span><span class="va">microdata</span><span class="op">$</span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1000</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">microdata</span><span class="op">)</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></code></pre></div>
<p>Then in order to construct a magnitude table where recordsâ€™
contributions to <code>num</code> are aggregated, we supply this as a
parameter to <code>GaussSuppressionFromData</code>:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         formula <span class="op">=</span> <span class="op">~</span> <span class="va">region</span> <span class="op">*</span> <span class="va">income2</span> <span class="op">+</span> <span class="op">(</span><span class="va">county</span> <span class="op">+</span> <span class="va">size</span><span class="op">)</span> <span class="op">*</span> <span class="va">main_income</span>,</span>
<span>                         numVar <span class="op">=</span> <span class="st">"num"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [preAggregate 338*7-&gt;22*7]</span></span>
<span><span class="co">#&gt;      region main_income freq.1    num primary suppressed</span></span>
<span><span class="co">#&gt; 1     Total       Total    338 168843   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2         A       Total    104  50640   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3         B       Total     51  27386   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4         C       Total     73  35826   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5         D       Total     14   5730   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6         E       Total     61  30295   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7         F       Total     35  18966   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8     Total   not_wages    316 157199   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9     Total       wages     22  11644   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10 county-1       Total    118  56370   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11 county-2       Total    124  63212   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12 county-3       Total     96  49261   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 13      BIG       Total    228 113852   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 14    small       Total    110  54991   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 15    Total  assistance    178  91989   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 16    Total       other     26  13000   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 17    Total    pensions    112  52210   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 18    Total       wages     22  11644   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 19        A   not_wages     93  45268   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 20        A       wages     11   5372   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 21        B   not_wages     50  26500   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 22        B       wages      1    886   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 23        C   not_wages     65  32111   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 24        C       wages      8   3715   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 25        D   not_wages     14   5730   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 26        E   not_wages     61  30295   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 27        F   not_wages     33  17295   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 28        F       wages      2   1671   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 29 county-1  assistance     64  33024   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 30 county-1       other      5   1260   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 31 county-1    pensions     38  16714   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 32 county-1       wages     11   5372   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 33 county-2  assistance     64  33424   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 34 county-2       other      8   4696   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 35 county-2    pensions     43  20491   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 36 county-2       wages      9   4601   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 37 county-3  assistance     50  25541   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 38 county-3       other     13   7044   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 39 county-3    pensions     31  15005   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 40 county-3       wages      2   1671   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 41      BIG  assistance    119  62407   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 42      BIG       other     10   4887   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 43      BIG    pensions     79  36585   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 44      BIG       wages     20   9973   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 45    small  assistance     59  29582   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 46    small       other     16   8113   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 47    small    pensions     33  15625   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 48    small       wages      2   1671   FALSE      FALSE</span></span></code></pre></div>
<br><table class="table table table-bordered" style="font-size: 14px; ">
<caption style="font-size: initial !important;">
<strong>Table 14</strong>:
<code>formula = ~ region * income2 + (county + size) * main_income</code>
<br> In each cell: <code>num</code> with frequencies in parenthesis.
</caption>
<thead><tr>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
region
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
other
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
assistance
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
pensions
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
not_wages
</th>
<th style="text-align:right;font-weight: bold;background-color: rgba(144, 204, 147, 255) !important;">
Total
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
A
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">5372 ( 11) </span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">45268 ( 93) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">50640 (104) </span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
B
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">886 ( 1) </span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">26500 ( 50) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">27386 ( 51) </span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
C
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">3715 ( 8) </span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">32111 ( 65) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">35826 ( 73) </span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
D
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">5730 ( 14) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">5730 ( 14) </span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
E
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">30295 ( 61) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">30295 ( 61) </span>
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
F
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     ">1671 ( 2) </span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">17295 ( 33) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">18966 ( 35) </span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-1
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">1260 ( 5) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">5372 ( 11) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">33024 ( 64) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">16714 ( 38) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">56370 (118) </span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-2
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">4696 ( 8) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">4601 ( 9) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">33424 ( 64) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">20491 ( 43) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">63212 (124) </span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
county-3
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">7044 ( 13) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">1671 ( 2) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">25541 ( 50) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">15005 ( 31) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">49261 ( 96) </span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
small
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">8113 ( 16) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">1671 ( 2) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">29582 ( 59) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">15625 ( 33) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">54991 (110) </span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
BIG
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">4887 ( 10) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">9973 ( 20) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">62407 (119) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">36585 ( 79) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style="     "></span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">113852 (228) </span>
</td>
</tr>
<tr>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;background-color: rgba(227, 241, 230, 255) !important;border-left:1px solid LightGray;border-right:1px solid LightGray;">
Total
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">13000 ( 26) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">11644 ( 22) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">91989 (178) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">52210 (112) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">157199 (316) </span>
</td>
<td style="text-align:right;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;font-weight: bold;background-color: rgba(220, 241, 252, 255) !important;border-right:1px solid LightGray;">
<span style=" font-weight: bold;    ">168843 (338) </span>
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Note that there are two empty cells in the wages column. This means
that these cells are not included in the output data. One reason is that
the <code>removeEmpty</code> parameter to
<code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/ModelMatrix.html" class="external-link">SSBtools::ModelMatrix</a></code> has <code>TRUE</code> as default in
the case of a formula interface. By including
<code>removeEmpty = FALSE</code>, zeros will be included in the output.
Another way to achieve this is to use <code>extend0 = TRUE</code>. By
this parameter, zeros are added to the input data after the automatic
aggregation from microdata. As you will see in other vignettes in this
package, the <code>extend0</code> parameter can be important for
suppression methods.</p>
<p>Note also that a new frequency variable is generated with the above
call. If a frequency variable is already present in the input data, we
can provide it in addition to <code>numVar</code> and the method will
use that information instead:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/GaussSuppressionFromData.html">GaussSuppressionFromData</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">microdata</span>,</span>
<span>                         formula <span class="op">=</span> <span class="op">~</span> <span class="va">region</span> <span class="op">*</span> <span class="va">income2</span> <span class="op">+</span> <span class="op">(</span><span class="va">county</span> <span class="op">+</span> <span class="va">size</span><span class="op">)</span> <span class="op">*</span> <span class="va">main_income</span>,</span>
<span>                         freqVar <span class="op">=</span> <span class="st">"freq"</span>,</span>
<span>                         numVar <span class="op">=</span> <span class="st">"num"</span>,</span>
<span>                         primary <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      region main_income freq    num primary suppressed</span></span>
<span><span class="co">#&gt; 1     Total       Total  338 168843   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 2         A       Total  104  50640   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 3         B       Total   51  27386   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 4         C       Total   73  35826   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 5         D       Total   14   5730   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 6         E       Total   61  30295   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 7         F       Total   35  18966   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 8     Total   not_wages  316 157199   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 9     Total       wages   22  11644   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 10 county-1       Total  118  56370   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 11 county-2       Total  124  63212   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 12 county-3       Total   96  49261   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 13      BIG       Total  228 113852   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 14    small       Total  110  54991   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 15    Total  assistance  178  91989   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 16    Total       other   26  13000   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 17    Total    pensions  112  52210   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 18    Total       wages   22  11644   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 19        A   not_wages   93  45268   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 20        A       wages   11   5372   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 21        B   not_wages   50  26500   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 22        B       wages    1    886   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 23        C   not_wages   65  32111   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 24        C       wages    8   3715   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 25        D   not_wages   14   5730   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 26        E   not_wages   61  30295   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 27        F   not_wages   33  17295   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 28        F       wages    2   1671   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 29 county-1  assistance   64  33024   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 30 county-1       other    5   1260   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 31 county-1    pensions   38  16714   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 32 county-1       wages   11   5372   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 33 county-2  assistance   64  33424   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 34 county-2       other    8   4696   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 35 county-2    pensions   43  20491   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 36 county-2       wages    9   4601   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 37 county-3  assistance   50  25541   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 38 county-3       other   13   7044   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 39 county-3    pensions   31  15005   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 40 county-3       wages    2   1671   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 41      BIG  assistance  119  62407   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 42      BIG       other   10   4887   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 43      BIG    pensions   79  36585   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 44      BIG       wages   20   9973   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 45    small  assistance   59  29582   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 46    small       other   16   8113   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 47    small    pensions   33  15625   FALSE      FALSE</span></span>
<span><span class="co">#&gt; 48    small       wages    2   1671   FALSE      FALSE</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ã˜yvind Langsrud, Daniel Lupp.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
