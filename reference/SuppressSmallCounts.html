<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Small count frequency table suppression. — SuppressSmallCounts • GaussSuppression</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Small count frequency table suppression. — SuppressSmallCounts"><meta name="description" content="This is a wrapper function of GaussSuppressionFromData
for small count frequency suppression. For common applications, the spec
parameter can be adjusted, see PackageSpecs for more
information. See Details for more information on function call customization."><meta property="og:description" content="This is a wrapper function of GaussSuppressionFromData
for small count frequency suppression. For common applications, the spec
parameter can be adjusted, see PackageSpecs for more
information. See Details for more information on function call customization."><meta property="og:image" content="https://statisticsnorway.github.io/ssb-gausssuppression/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GaussSuppression</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/define_tables.html">Defining Tables for GaussSuppression</a></li>
    <li><a class="dropdown-item" href="../articles/Magnitude_table_suppression.html">Magnitude table suppression</a></li>
    <li><a class="dropdown-item" href="../articles/Small_count_frequency_table_suppression.html">Small count frequency table suppression</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-gausssuppression/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Small count frequency table suppression.</h1>
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-gausssuppression/blob/main/R/SuppressSmallCounts.R" class="external-link"><code>R/SuppressSmallCounts.R</code></a></small>
      <div class="d-none name"><code>SuppressSmallCounts.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a wrapper function of <code><a href="GaussSuppressionFromData.html">GaussSuppressionFromData</a></code>
for small count frequency suppression. For common applications, the <code>spec</code>
parameter can be adjusted, see <code><a href="PackageSpecs.html">PackageSpecs</a></code> for more
information. See Details for more information on function call customization.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">maxN</span>,</span>
<span>  freqVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dimVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hierarchies <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  spec <span class="op">=</span> <span class="fu"><a href="PackageSpecs.html">PackageSpecs</a></span><span class="op">(</span><span class="st">"smallCountSpec"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data, typically a data frame, tibble, or data.table.
If <code>data</code> is not a classic data frame, it will be coerced to one internally
unless <code>preAggregate</code> is <code>TRUE</code> and <code>aggregatePackage</code> is <code>"data.table"</code>.</p></dd>


<dt id="arg-maxn">maxN<a class="anchor" aria-label="anchor" href="#arg-maxn"></a></dt>
<dd><p>Suppression threshold. Cells with frequency <code>&lt;= maxN</code> are marked
as primary suppressed. This parameter is passed to <code><a href="PrimaryDefault.html">PrimaryDefault()</a></code>
via <code><a href="GaussSuppressionFromData.html">GaussSuppressionFromData()</a></code>.</p></dd>


<dt id="arg-freqvar">freqVar<a class="anchor" aria-label="anchor" href="#arg-freqvar"></a></dt>
<dd><p>A single variable holding counts (name or number).</p></dd>


<dt id="arg-dimvar">dimVar<a class="anchor" aria-label="anchor" href="#arg-dimvar"></a></dt>
<dd><p>The main dimensional variables and additional aggregating variables. This parameter can be  useful when hierarchies and formula are unspecified.</p></dd>


<dt id="arg-hierarchies">hierarchies<a class="anchor" aria-label="anchor" href="#arg-hierarchies"></a></dt>
<dd><p>List of hierarchies, which can be converted by <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/AutoHierarchies.html" class="external-link">AutoHierarchies</a></code>.
Thus, the variables can also be coded by <code>"rowFactor"</code> or <code>""</code>, which correspond to using the categories in the data.</p></dd>


<dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>A model formula</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments to be passed to the supplied functions and to <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/ModelMatrix.html" class="external-link">ModelMatrix</a></code> (such as <code>inputInOutput</code> and <code>removeEmpty</code>).</p></dd>


<dt id="arg-spec">spec<a class="anchor" aria-label="anchor" href="#arg-spec"></a></dt>
<dd><p><code>NULL</code> or a named list of arguments that will act as default values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data frame containing aggregated data and suppression information.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The specs provided in the package (see <code><a href="PackageSpecs.html">PackageSpecs</a></code>)
provide common parameter setups for small count suppression. However, it might
be necessary to customize the parameters further. In this case, certain
parameters from <code><a href="GaussSuppressionFromData.html">GaussSuppressionFromData</a></code>
might need adjusting from the values provided by the package specs. In
particular, the parameters <code>protectZeros</code> (should zeros be primary
suppressed), <code>extend0</code> (should empty cells be added before primary
suppression), and <code>secondaryZeros</code> (should zero frequency cells be
candidates for secondary suppression) might be of interest. The examples
below illustrate how to override parameters specified by a spec. Note
that this is only possible if <code>specLock = FALSE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/tables_by_formulas.html" class="external-link">SSBtools::tables_by_formulas()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">mun_accidents</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"mun_accidents"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mun_accidents</span>, maxN <span class="op">=</span> <span class="fl">3</span>, dimVar <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, freqVar <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 24*3-&gt;24*3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: .............</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      mun     inj freq primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Total   Total   32   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  Total   light    3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Total    none    6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Total serious   23   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Total unknown    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     k1   Total    4   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     k1   light    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     k1    none    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     k1 serious    4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    k1 unknown    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    k2   Total    6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    k2   light    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    k2    none    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14    k2 serious    5   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    k2 unknown    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16    k3   Total    6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    k3   light    2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18    k3    none    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19    k3 serious    3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20    k3 unknown    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21    k4   Total    9   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    k4   light    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23    k4    none    4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    k4 serious    4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25    k4 unknown    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26    k5   Total    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27    k5   light    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28    k5    none    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29    k5 serious    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30    k5 unknown    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31    k6   Total    6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32    k6   light    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33    k6    none    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34    k6 serious    6   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35    k6 unknown    0    TRUE       TRUE</span>
<span class="r-in"><span><span class="co"># override default spec</span></span></span>
<span class="r-in"><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mun_accidents</span>, maxN <span class="op">=</span> <span class="fl">3</span>, dimVar <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, freqVar <span class="op">=</span> <span class="fl">3</span>, </span></span>
<span class="r-in"><span>                    protectZeros <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 24*3-&gt;24*3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ...........................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      mun     inj freq primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Total   Total   32   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  Total   light    3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Total    none    6   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Total serious   23   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Total unknown    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     k1   Total    4   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     k1   light    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     k1    none    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     k1 serious    4   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    k1 unknown    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    k2   Total    6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    k2   light    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13    k2    none    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14    k2 serious    5   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    k2 unknown    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16    k3   Total    6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    k3   light    2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18    k3    none    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19    k3 serious    3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20    k3 unknown    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21    k4   Total    9   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    k4   light    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23    k4    none    4   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24    k4 serious    4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25    k4 unknown    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26    k5   Total    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27    k5   light    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28    k5    none    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29    k5 serious    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30    k5 unknown    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31    k6   Total    6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32    k6   light    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33    k6    none    0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34    k6 serious    6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35    k6 unknown    0   FALSE      FALSE</span>
<span class="r-in"><span>                    </span></span>
<span class="r-in"><span>                    </span></span>
<span class="r-in"><span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"d2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d2</span><span class="op">$</span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">d2</span><span class="op">$</span><span class="va">freq</span><span class="op">/</span><span class="fl">10</span><span class="op">)</span>  <span class="co"># tenth as frequency in examples</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Hierarchical region variables are detected automatically -&gt; same output column</span></span></span>
<span class="r-in"><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">d2</span>, maxN <span class="op">=</span> <span class="fl">2</span>, freqVar <span class="op">=</span> <span class="st">"f"</span>, </span></span>
<span class="r-in"><span>                    dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"county"</span>, <span class="st">"k_group"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 44*4-&gt;44*4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ..................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region  f primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       1 13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      10  9   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     300 59   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       4  6   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     400 10   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       5 11   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       6 19   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       8 11   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   Total 69   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      A 12   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      B  6   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      C  7   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      D  4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      E 13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      F  6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      G  4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      H  7   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      I  1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      J  6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      K  3   FALSE       TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Formula. Hierarchical variables still detected automatically.</span></span></span>
<span class="r-in"><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">d2</span>, maxN <span class="op">=</span> <span class="fl">3</span>, freqVar <span class="op">=</span> <span class="st">"f"</span>, </span></span>
<span class="r-in"><span>                    formula <span class="op">=</span> <span class="op">~</span><span class="va">main_income</span> <span class="op">*</span> <span class="va">k_group</span> <span class="op">+</span> <span class="va">region</span> <span class="op">+</span> <span class="va">county</span> <span class="op">-</span> <span class="va">k_group</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 44*5-&gt;44*5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ........................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    main_income region  f primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        Total  Total 69   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   assistance  Total 35   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        other  Total  8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     pensions  Total 22   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        wages  Total  4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        Total      A 12   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        Total      B  6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        Total      C  7   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        Total      D  4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       Total      E 13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       Total      F  6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       Total      G  4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       Total      H  7   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       Total      I  1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       Total      J  6   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16       Total      K  3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17       Total      1 13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18       Total      4  6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19       Total      5 11   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20       Total      6 19   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21       Total      8 11   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22       Total     10  9   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23  assistance    300 29   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24  assistance    400  6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25       other    300  7   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26       other    400  1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27    pensions    300 19   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28    pensions    400  3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29       wages    300  4   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30       wages    400  0    TRUE       TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With hierarchies created manually</span></span></span>
<span class="r-in"><span><span class="va">ml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"@"</span>, <span class="st">"@@"</span>, <span class="st">"@@@"</span>, <span class="st">"@@@"</span>, <span class="st">"@@@"</span>, <span class="st">"@@"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>        codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Total"</span>, <span class="st">"not_assistance"</span>, <span class="st">"other"</span>, <span class="st">"pensions"</span>, <span class="st">"wages"</span>, <span class="st">"assistance"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">d2</span>, maxN <span class="op">=</span> <span class="fl">2</span>, freqVar <span class="op">=</span> <span class="st">"f"</span>, </span></span>
<span class="r-in"><span>                    hierarchies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>main_income <span class="op">=</span> <span class="va">ml</span>, k_group <span class="op">=</span> <span class="st">"Total_Norway"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 44*3-&gt;44*3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       main_income      k_group  f primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           Total Total_Norway 69   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           Total          300 59   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           Total          400 10   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  not_assistance Total_Norway 34   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  not_assistance          300 30   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  not_assistance          400  4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      assistance Total_Norway 35   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      assistance          300 29   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      assistance          400  6   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          other Total_Norway  8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          other          300  7   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12          other          400  1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       pensions Total_Norway 22   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       pensions          300 19   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       pensions          400  3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16          wages Total_Norway  4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17          wages          300  4   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18          wages          400  0    TRUE       TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Data without pensions in k_group 400 </span></span></span>
<span class="r-in"><span><span class="co"># And assume these are structural zeros (will not be suppressed)</span></span></span>
<span class="r-in"><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">d2</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">41</span>, <span class="op">]</span>, maxN <span class="op">=</span> <span class="fl">3</span>, freqVar <span class="op">=</span> <span class="st">"f"</span>, </span></span>
<span class="r-in"><span>                    hierarchies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>main_income <span class="op">=</span> <span class="va">ml</span>, k_group <span class="op">=</span> <span class="st">"Total_Norway"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                    extend0 <span class="op">=</span> <span class="cn">FALSE</span>, structuralEmpty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ..............</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       main_income      k_group  f primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           Total Total_Norway 66   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           Total          300 59   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           Total          400  7   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  not_assistance Total_Norway 31   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  not_assistance          300 30   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  not_assistance          400  1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      assistance Total_Norway 35   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      assistance          300 29   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      assistance          400  6   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          other Total_Norway  8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          other          300  7   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12          other          400  1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       pensions Total_Norway 19   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       pensions          300 19   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       pensions          400  0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16          wages Total_Norway  4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17          wages          300  4   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18          wages          400  0    TRUE       TRUE</span>
<span class="r-in"><span><span class="co"># -- Note for the example above -- </span></span></span>
<span class="r-in"><span><span class="co"># With protectZeros = FALSE </span></span></span>
<span class="r-in"><span><span class="co">#   - No zeros suppressed</span></span></span>
<span class="r-in"><span><span class="co"># With extend0 = FALSE and structuralEmpty = FALSE </span></span></span>
<span class="r-in"><span><span class="co">#   - Primary suppression without protection (with warning) </span></span></span>
<span class="r-in"><span><span class="co"># With extend0 = TRUE and structuralEmpty = TRUE </span></span></span>
<span class="r-in"><span><span class="co">#   - As default behavior. Suppression/protection of all zeros (since nothing empty)</span></span></span>
<span class="r-in"><span><span class="co"># With formula instead of hierarchies: Extra parameter needed when extend0 = FALSE.</span></span></span>
<span class="r-in"><span><span class="co">#   - removeEmpty = FALSE,  to include empty zeros in output.       </span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using formula followed by FormulaSelection </span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"example1"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                              formula <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">*</span> <span class="va">geo</span> <span class="op">*</span> <span class="va">year</span> <span class="op">+</span> <span class="va">eu</span> <span class="op">*</span> <span class="va">year</span>, </span></span>
<span class="r-in"><span>                              freqVar <span class="op">=</span> <span class="st">"freq"</span>, </span></span>
<span class="r-in"><span>                              maxN <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 18*5-&gt;18*5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ..............................................</span>
<span class="r-in"><span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FormulaSelection.html" class="external-link">FormulaSelection</a></span><span class="op">(</span><span class="va">output</span>, <span class="op">~</span><span class="op">(</span><span class="va">age</span> <span class="op">+</span> <span class="va">eu</span><span class="op">)</span> <span class="op">*</span> <span class="va">year</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      age   geo  year freq primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Total Total Total   59   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    old Total Total   38   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  young Total Total   21   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Total Total  2014   20   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Total Total  2015   18   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Total Total  2016   21   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Total    EU Total   46   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Total nonEU Total   13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   old Total  2014   13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19   old Total  2015   13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20   old Total  2016   12   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 young Total  2014    7   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 young Total  2015    5   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 young Total  2016    9   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 Total    EU  2014   15   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 Total nonEU  2014    5   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 Total    EU  2015   15   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 Total nonEU  2015    3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37 Total    EU  2016   16   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38 Total nonEU  2016    5   FALSE      FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To illustrate hierarchical_extend0 </span></span></span>
<span class="r-in"><span><span class="co"># (parameter to underlying function, SSBtools::Extend0fromModelMatrixInput)</span></span></span>
<span class="r-in"><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"example1"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                    formula <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">*</span> <span class="va">geo</span> <span class="op">*</span> <span class="va">eu</span>, freqVar <span class="op">=</span> <span class="st">"freq"</span>, </span></span>
<span class="r-in"><span>                    maxN <span class="op">=</span> <span class="fl">0</span>,  avoidHierarchical <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 18*4-&gt;24*4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ...........................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      age      geo    eu freq primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Total    Total Total   59   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    old    Total Total   38   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  young    Total Total   21   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Total  Iceland Total   13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Total Portugal Total   12   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Total    Spain Total   34   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Total    Total    EU   46   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Total    Total nonEU   13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    old  Iceland Total   10   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   old Portugal Total   11   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   old    Spain Total   17   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 young  Iceland Total    3   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 young Portugal Total    1   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 young    Spain Total   17   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   old    Total    EU   28   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   old    Total nonEU   10   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 young    Total    EU   18   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 young    Total nonEU    3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 Total  Iceland    EU    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 Total  Iceland nonEU   13   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 Total Portugal    EU   12   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22 Total Portugal nonEU    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23 Total    Spain    EU   34   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24 Total    Spain nonEU    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25   old  Iceland    EU    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26   old  Iceland nonEU   10   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27   old Portugal    EU   11   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28   old Portugal nonEU    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   old    Spain    EU   17   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30   old    Spain nonEU    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 young  Iceland    EU    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32 young  Iceland nonEU    3   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33 young Portugal    EU    1   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34 young Portugal nonEU    0    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35 young    Spain    EU   17   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36 young    Spain nonEU    0    TRUE       TRUE</span>
<span class="r-in"><span><span class="fu">SuppressSmallCounts</span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"example1"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                    formula <span class="op">=</span> <span class="op">~</span><span class="va">age</span> <span class="op">*</span> <span class="va">geo</span> <span class="op">*</span> <span class="va">eu</span>, freqVar <span class="op">=</span> <span class="st">"freq"</span>, </span></span>
<span class="r-in"><span>                    maxN <span class="op">=</span> <span class="fl">0</span>,  avoidHierarchical <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                    hierarchical_extend0 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 18*4-&gt;18*4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      age      geo    eu freq primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  Total    Total Total   59   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    old    Total Total   38   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  young    Total Total   21   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Total  Iceland Total   13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Total Portugal Total   12   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  Total    Spain Total   34   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  Total    Total    EU   46   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  Total    Total nonEU   13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    old  Iceland Total   10   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10   old Portugal Total   11   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11   old    Spain Total   17   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 young  Iceland Total    3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 young Portugal Total    1   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 young    Spain Total   17   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15   old    Total    EU   28   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16   old    Total nonEU   10   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 young    Total    EU   18   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 young    Total nonEU    3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 Total  Iceland nonEU   13   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 Total Portugal    EU   12   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21 Total    Spain    EU   34   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22   old  Iceland nonEU   10   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23   old Portugal    EU   11   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24   old    Spain    EU   17   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25 young  Iceland nonEU    3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26 young Portugal    EU    1   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27 young    Spain    EU   17   FALSE      FALSE</span>
<span class="r-in"><span>               </span></span>
<span class="r-in"><span>               </span></span>
<span class="r-in"><span><span class="co"># This example is similar to the one in the documentation of tables_by_formulas,  </span></span></span>
<span class="r-in"><span><span class="co"># but it uses SuppressSmallCounts, and the input data (SSBtoolsData("magnitude1"))  </span></span></span>
<span class="r-in"><span><span class="co"># is used to generate a frequency table by excluding the "value" variable. </span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/tables_by_formulas.html" class="external-link">tables_by_formulas</a></span><span class="op">(</span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"magnitude1"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   table_fun <span class="op">=</span> <span class="va">SuppressSmallCounts</span>, </span></span>
<span class="r-in"><span>                   table_formulas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>table_1 <span class="op">=</span> <span class="op">~</span><span class="va">region</span> <span class="op">*</span> <span class="va">sector2</span>, </span></span>
<span class="r-in"><span>                                         table_2 <span class="op">=</span> <span class="op">~</span><span class="va">region1</span><span class="op">:</span><span class="va">sector4</span> <span class="op">-</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span>                                         table_3 <span class="op">=</span> <span class="op">~</span><span class="va">region</span> <span class="op">+</span> <span class="va">sector4</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   substitute_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geo"</span>, <span class="st">"eu"</span><span class="op">)</span>, region1 <span class="op">=</span> <span class="st">"eu"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   collapse_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector2"</span>, <span class="st">"sector4"</span><span class="op">)</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   maxN <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>                 </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [preAggregate 20*6-&gt;10*5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 10*5-&gt;12*5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ...................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      region        sector freq primary suppressed table_1 table_2 table_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     Total         Total   20   FALSE      FALSE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Iceland         Total    4   FALSE      FALSE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Portugal         Total    8   FALSE      FALSE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     Spain         Total    8   FALSE      FALSE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        EU         Total   16   FALSE      FALSE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     nonEU         Total    4   FALSE      FALSE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     Total       private   16   FALSE      FALSE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     Total        public    4   FALSE      FALSE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     Total   Agriculture    4   FALSE      FALSE   FALSE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    Total Entertainment    6   FALSE      FALSE   FALSE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    Total  Governmental    4   FALSE      FALSE   FALSE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    Total      Industry    6   FALSE      FALSE   FALSE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  Iceland       private    4   FALSE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  Iceland        public    0    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 Portugal       private    6   FALSE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 Portugal        public    2    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    Spain       private    6   FALSE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18    Spain        public    2    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19       EU       private   12   FALSE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20       EU        public    4   FALSE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21    nonEU       private    4   FALSE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22    nonEU        public    0    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23       EU   Agriculture    4   FALSE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24       EU Entertainment    5   FALSE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25       EU  Governmental    4   FALSE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26       EU      Industry    3   FALSE      FALSE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27    nonEU   Agriculture    0    TRUE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28    nonEU Entertainment    1    TRUE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29    nonEU  Governmental    0    TRUE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30    nonEU      Industry    3   FALSE      FALSE   FALSE    TRUE   FALSE</span>
<span class="r-in"><span>                   </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud, Daniel Lupp.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

