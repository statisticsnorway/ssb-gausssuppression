<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cell suppression from synthetic decimal numbers — SuppressionFromDecimals • GaussSuppression</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cell suppression from synthetic decimal numbers — SuppressionFromDecimals"><meta name="description" content="Decimal numbers, as calculated by GaussSuppressDec, are used to decide suppression (whole numbers or not).
Technically, the calculations are done via GaussSuppressionFromData,
but without running GaussSuppression.
All suppressed cells are primary suppressed."><meta property="og:description" content="Decimal numbers, as calculated by GaussSuppressDec, are used to decide suppression (whole numbers or not).
Technically, the calculations are done via GaussSuppressionFromData,
but without running GaussSuppression.
All suppressed cells are primary suppressed."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GaussSuppression</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/define_tables.html">Defining Tables for GaussSuppression</a></li>
    <li><a class="dropdown-item" href="../articles/Magnitude_table_suppression.html">Magnitude table suppression</a></li>
    <li><a class="dropdown-item" href="../articles/Small_count_frequency_table_suppression.html">Small count frequency table suppression</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-gausssuppression/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cell suppression from synthetic decimal numbers</h1>
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-gausssuppression/blob/main/R/SuppressionFromDecimals.R" class="external-link"><code>R/SuppressionFromDecimals.R</code></a></small>
      <div class="d-none name"><code>SuppressionFromDecimals.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Decimal numbers, as calculated by <code><a href="GaussSuppressDec.html">GaussSuppressDec</a></code>, are used to decide suppression (whole numbers or not).
Technically, the calculations are done via <code><a href="GaussSuppressionFromData.html">GaussSuppressionFromData</a></code>,
but without running <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/GaussSuppression.html" class="external-link">GaussSuppression</a></code>.
All suppressed cells are primary suppressed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SuppressionFromDecimals</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">decVar</span>,</span>
<span>  freqVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  numVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  preAggregate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">9</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data as a data frame</p></dd>


<dt id="arg-decvar">decVar<a class="anchor" aria-label="anchor" href="#arg-decvar"></a></dt>
<dd><p>One ore several (<code>nRep&gt;1</code>) decimal number variables.</p></dd>


<dt id="arg-freqvar">freqVar<a class="anchor" aria-label="anchor" href="#arg-freqvar"></a></dt>
<dd><p>A single variable holding counts (not needed)</p></dd>


<dt id="arg-numvar">numVar<a class="anchor" aria-label="anchor" href="#arg-numvar"></a></dt>
<dd><p>Other numerical variables to be aggregated</p></dd>


<dt id="arg-preaggregate">preAggregate<a class="anchor" aria-label="anchor" href="#arg-preaggregate"></a></dt>
<dd><p>Parameter to <code><a href="GaussSuppressionFromData.html">GaussSuppressionFromData</a></code></p></dd>


<dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>Parameter to <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/RoundWhole.html" class="external-link">RoundWhole</a></code>. Values close to whole numbers will be rounded.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other parameters to <code><a href="GaussSuppressionFromData.html">GaussSuppressionFromData</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Aggregated data with suppression information</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Several decimal number variables reduce the probability of obtaining whole numbers by chance.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Øyvind Langsrud</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">z2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"z2"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find suppression and decimal numbers with "fylke" in model </span></span></span>
<span class="r-in"><span><span class="va">a1</span> <span class="op">&lt;-</span> <span class="fu"><a href="GaussSuppressDec.html">GaussSuppressDec</a></span><span class="op">(</span><span class="va">z2</span>,</span></span>
<span class="r-in"><span>                       fun <span class="op">=</span> <span class="va">SuppressSmallCounts</span>,   </span></span>
<span class="r-in"><span>                       dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"fylke"</span>, <span class="st">"hovedint"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                       freqVar <span class="op">=</span> <span class="st">"ant"</span>, protectZeros <span class="op">=</span> <span class="cn">FALSE</span>, maxN <span class="op">=</span> <span class="fl">2</span>, </span></span>
<span class="r-in"><span>                       output <span class="op">=</span> <span class="st">"inner"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extend0 44*4-&gt;44*4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_anySum: ..........................</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add decimal numbers to data </span></span></span>
<span class="r-in"><span><span class="va">z2</span><span class="op">$</span><span class="va">freqDec</span> <span class="op">&lt;-</span> <span class="va">a1</span><span class="op">$</span><span class="va">freqDec</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find suppression with "kostragr" in model </span></span></span>
<span class="r-in"><span><span class="va">a2</span> <span class="op">&lt;-</span> <span class="fu">SuppressionFromDecimals</span><span class="op">(</span><span class="va">z2</span>, dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"kostragr"</span>, <span class="st">"hovedint"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                              freqVar <span class="op">=</span> <span class="st">"ant"</span>, decVar <span class="op">=</span> <span class="st">"freqDec"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_none: </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">a2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region hovedint ant    freqDec primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 65      J    trygd  20 20.0000000   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 66      K    Total  35 35.0000000   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67      K    annet   4  5.6718736    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68      K   arbeid   2  0.3281264    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69      K soshjelp  18 18.0000000   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 70      K    trygd  11 11.0000000   FALSE      FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">b1</span> <span class="op">&lt;-</span> <span class="fu"><a href="GaussSuppressDec.html">GaussSuppressDec</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"magnitude1"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                       fun <span class="op">=</span> <span class="va">SuppressDominantCells</span>, </span></span>
<span class="r-in"><span>                       numVar <span class="op">=</span> <span class="st">"value"</span>, </span></span>
<span class="r-in"><span>                       formula <span class="op">=</span> <span class="op">~</span><span class="va">sector2</span> <span class="op">*</span> <span class="va">geo</span> <span class="op">+</span> <span class="va">sector4</span> <span class="op">*</span> <span class="va">eu</span>,</span></span>
<span class="r-in"><span>                       contributorVar <span class="op">=</span> <span class="st">"company"</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">99</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [preAggregate 20*6-&gt;20*7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 20*7-&gt;10*7] Checking .....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: .........:::::</span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="va">b2</span> <span class="op">&lt;-</span> <span class="fu">SuppressionFromDecimals</span><span class="op">(</span><span class="va">b1</span><span class="op">[</span><span class="va">b1</span><span class="op">$</span><span class="va">isInner</span>, <span class="op">]</span>, </span></span>
<span class="r-in"><span>                              formula <span class="op">=</span> <span class="op">~</span><span class="op">(</span><span class="va">sector2</span> <span class="op">+</span> <span class="va">sector4</span><span class="op">)</span> <span class="op">*</span> <span class="va">eu</span>, </span></span>
<span class="r-in"><span>                              numVar <span class="op">=</span> <span class="st">"value"</span>, </span></span>
<span class="r-in"><span>                              decVar <span class="op">=</span> <span class="st">"freqDec"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_none: </span>
<span class="r-in"><span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FormulaSelection.html" class="external-link">FormulaSelection</a></span><span class="op">(</span><span class="va">b2</span>, <span class="op">~</span><span class="va">sector2</span> <span class="op">*</span> <span class="va">eu</span><span class="op">)</span>                                 </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    sector4    eu       freqDec value primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Total Total  1.110223e-16 462.3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  private Total -1.110223e-16 429.5   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   public Total  2.220446e-16  32.8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    Total    EU  5.551115e-16 425.2   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    Total nonEU -4.440892e-16  37.1   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 private    EU  3.330669e-16 392.4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 private nonEU -4.440892e-16  37.1   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12  public    EU  2.220446e-16  32.8   FALSE      FALSE</span>
<span class="r-in"><span>                              </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud, Daniel Lupp.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

