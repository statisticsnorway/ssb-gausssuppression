<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Suppress magnitude tables using dominance (n,k) or p% rule for primary suppression. — SuppressDominantCells • GaussSuppression</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Suppress magnitude tables using dominance (n,k) or p% rule for primary suppression. — SuppressDominantCells"><meta name="description" content="This function utilizes MagnitudeRule."><meta property="og:description" content="This function utilizes MagnitudeRule."><meta property="og:image" content="https://statisticsnorway.github.io/ssb-gausssuppression/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GaussSuppression</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/define_tables.html">Defining Tables for GaussSuppression</a></li>
    <li><a class="dropdown-item" href="../articles/Magnitude_table_suppression.html">Magnitude table suppression</a></li>
    <li><a class="dropdown-item" href="../articles/Small_count_frequency_table_suppression.html">Small count frequency table suppression</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-gausssuppression/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Suppress magnitude tables using dominance <code>(n,k)</code> or p% rule for primary suppression.</h1>
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-gausssuppression/blob/main/R/SuppressDominantCells.R" class="external-link"><code>R/SuppressDominantCells.R</code></a></small>
      <div class="d-none name"><code>SuppressDominantCells.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function utilizes <code><a href="MagnitudeRule.html">MagnitudeRule</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SuppressDominantCells</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">k</span><span class="op">)</span>,</span>
<span>  k <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pPercent <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allDominance <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dominanceVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  numVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dimVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hierarchies <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  contributorVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sWeightVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  candidatesVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  singletonZeros <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  preAggregate <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">contributorVar</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">sWeightVar</span><span class="op">)</span>,</span>
<span>  spec <span class="op">=</span> <span class="fu"><a href="PackageSpecs.html">PackageSpecs</a></span><span class="op">(</span><span class="st">"dominanceSpec"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Input data, typically a data frame, tibble, or data.table.
If <code>data</code> is not a classic data frame, it will be coerced to one internally
unless <code>preAggregate</code> is <code>TRUE</code> and <code>aggregatePackage</code> is <code>"data.table"</code>.</p></dd>


<dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Parameter <code>n</code> in dominance rule. Default is <code>1:length(k)</code>.</p></dd>


<dt id="arg-k">k<a class="anchor" aria-label="anchor" href="#arg-k"></a></dt>
<dd><p>Parameter <code>k</code> in dominance rule.</p></dd>


<dt id="arg-ppercent">pPercent<a class="anchor" aria-label="anchor" href="#arg-ppercent"></a></dt>
<dd><p>Parameter in the p% rule, when non-NULL.
Parameters <code>n</code> and  <code>k</code> will then be ignored.
Technically, calculations are performed internally as if
<code>n = 1:2</code>. The results of these intermediate calculations can
be viewed by setting <code>allDominance = TRUE</code>.</p></dd>


<dt id="arg-alldominance">allDominance<a class="anchor" aria-label="anchor" href="#arg-alldominance"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, additional information is included in the output,
as described in <code><a href="MagnitudeRule.html">MagnitudeRule</a></code>.</p></dd>


<dt id="arg-dominancevar">dominanceVar<a class="anchor" aria-label="anchor" href="#arg-dominancevar"></a></dt>
<dd><p>Numerical variable to be used in dominance rule.
The first <code>numVar</code> variable will be used if it is not specified.</p></dd>


<dt id="arg-numvar">numVar<a class="anchor" aria-label="anchor" href="#arg-numvar"></a></dt>
<dd><p>Numerical variable to be aggregated.
Any <code>dominanceVar</code> and <code>candidatesVar</code> that are specified and
not included in <code>numVar</code> will be aggregated accordingly.</p></dd>


<dt id="arg-dimvar">dimVar<a class="anchor" aria-label="anchor" href="#arg-dimvar"></a></dt>
<dd><p>The main dimensional variables and additional aggregating variables. This parameter can be  useful when hierarchies and formula are unspecified.</p></dd>


<dt id="arg-hierarchies">hierarchies<a class="anchor" aria-label="anchor" href="#arg-hierarchies"></a></dt>
<dd><p>List of hierarchies, which can be converted by <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/AutoHierarchies.html" class="external-link">AutoHierarchies</a></code>.
Thus, the variables can also be coded by <code>"rowFactor"</code> or <code>""</code>, which correspond to using the categories in the data.</p></dd>


<dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>A model formula</p></dd>


<dt id="arg-contributorvar">contributorVar<a class="anchor" aria-label="anchor" href="#arg-contributorvar"></a></dt>
<dd><p>Extra variables to be used as grouping elements in the dominance rule.
Typically, the variable contains the contributor IDs.</p></dd>


<dt id="arg-sweightvar">sWeightVar<a class="anchor" aria-label="anchor" href="#arg-sweightvar"></a></dt>
<dd><p>Name of variable which represents sampling weights to be used
in dominance rule</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments to be passed to the supplied functions and to <code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/ModelMatrix.html" class="external-link">ModelMatrix</a></code> (such as <code>inputInOutput</code> and <code>removeEmpty</code>).</p></dd>


<dt id="arg-candidatesvar">candidatesVar<a class="anchor" aria-label="anchor" href="#arg-candidatesvar"></a></dt>
<dd><p>Variable to be used in the candidate function to prioritize cells for
publication and thus not suppression. If not specified, the same variable that is
used for the dominance rule will be applied (see <code>dominanceVar</code> and <code>numVar</code>).</p></dd>


<dt id="arg-singletonzeros">singletonZeros<a class="anchor" aria-label="anchor" href="#arg-singletonzeros"></a></dt>
<dd><p>When negative values cannot occur, one can determine from a
non-suppressed marginal cell with the value 0 that all underlying cells also have the
value 0. The use of <code>singletonZeros = TRUE</code> is intended to prevent this phenomenon from
causing suppressed cells to be revealable. It is the zeros in the <code>dominanceVar</code> variable
that are examined. Specifically, the ordinary singleton method is combined with a method
that is actually designed for frequency tables. This approach also works for magnitude
tables when <code><a href="SingletonUniqueContributor.html">SingletonUniqueContributor0</a></code> is utilized.</p></dd>


<dt id="arg-preaggregate">preAggregate<a class="anchor" aria-label="anchor" href="#arg-preaggregate"></a></dt>
<dd><p>Parameter to <code><a href="GaussSuppressionFromData.html">GaussSuppressionFromData</a></code>.
Necessary to include here since the specification in <code>spec</code> cannot take <code>sWeightVar</code> into account.</p></dd>


<dt id="arg-spec">spec<a class="anchor" aria-label="anchor" href="#arg-spec"></a></dt>
<dd><p><code>NULL</code> or a named list of arguments that will act as default values.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data frame containing aggregated data and suppression information.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/tables_by_formulas.html" class="external-link">SSBtools::tables_by_formulas()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>,</span></span>
<span class="r-in"><span>         <span class="fl">90</span>, <span class="fl">10</span>,</span></span>
<span class="r-in"><span>         <span class="fl">80</span>, <span class="fl">20</span>,</span></span>
<span class="r-in"><span>         <span class="fl">70</span>, <span class="fl">30</span>,</span></span>
<span class="r-in"><span>         <span class="fl">50</span>, <span class="fl">25</span>, <span class="fl">25</span>,</span></span>
<span class="r-in"><span>         <span class="fl">40</span>, <span class="fl">20</span>, <span class="fl">20</span>, <span class="fl">20</span>,</span></span>
<span class="r-in"><span>         <span class="fl">25</span>, <span class="fl">25</span>, <span class="fl">25</span>, <span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"v1"</span>,</span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"v2"</span>, <span class="st">"v3"</span>, <span class="st">"v4"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"v5"</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"v6"</span>, <span class="st">"v7"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sweight</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>v1 <span class="op">=</span> <span class="va">v1</span>, num <span class="op">=</span> <span class="va">num</span>, sweight <span class="op">=</span> <span class="va">sweight</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># basic use</span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span><span class="va">d</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>,<span class="fl">70</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"num"</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">v1</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 18*2-&gt;7*3] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: ..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   v1 num primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 v1 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 v2 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 v3 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 v4 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 v5 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 v6 100   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 v7 100   FALSE      FALSE</span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span><span class="va">d</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>,<span class="fl">70</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"num"</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">v1</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="co"># same as above</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 18*2-&gt;7*3] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: ..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   v1 num primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 v1 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 v2 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 v3 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 v4 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 v5 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 v6 100   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 v7 100   FALSE      FALSE</span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span><span class="va">d</span>, pPercent <span class="op">=</span> <span class="fl">7</span>, numVar <span class="op">=</span> <span class="st">"num"</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">v1</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 18*2-&gt;7*3] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   v1 num primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 v1 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 v2 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 v3 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 v4 100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 v5 100   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 v6 100   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 v7 100   FALSE      FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with weights</span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span><span class="va">d</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>,<span class="fl">70</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"num"</span>,</span></span>
<span class="r-in"><span>dimVar <span class="op">=</span> <span class="st">"v1"</span>, sWeightVar <span class="op">=</span> <span class="st">"sweight"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 18*3-&gt;7*3] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: .......</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      v1 num sweight weighted.num primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Total 700      24         1055   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    v1 100       1          100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    v2 100       3          190   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    v3 100       3          180   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    v4 100       3          170   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    v5 100       4          150   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    v6 100       5          140   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    v7 100       5          125   FALSE      FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># overwriting some parameters in default spec</span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span><span class="va">d</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>,<span class="fl">70</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"num"</span>,</span></span>
<span class="r-in"><span>dimVar <span class="op">=</span> <span class="st">"v1"</span>, sWeightVar <span class="op">=</span> <span class="st">"sweight"</span>, domWeightMethod <span class="op">=</span> <span class="st">"tauargus"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 18*3-&gt;7*3] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      v1 num sweight weighted.num primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Total 700      24         1055   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    v1 100       1          100    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    v2 100       3          190    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    v3 100       3          180    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    v4 100       3          170    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    v5 100       4          150   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    v6 100       5          140   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    v7 100       5          125   FALSE      FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># using dominance and few contributors rule together, see second example compared to first</span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span><span class="va">d</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>,<span class="fl">70</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"num"</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">v1</span> <span class="op">-</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>primary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">DominanceRule</span>, <span class="va">NContributorsRule</span><span class="op">)</span>, maxN <span class="op">=</span> <span class="fl">3</span>, allDominance <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 18*2-&gt;7*3] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: ..</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   v1 num dominant1 dominant2 max1contributor max2contributor n_contr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 v1 100      1.00      1.00               1              NA       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 v2 100      0.90      1.00               2               3       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 v3 100      0.80      1.00               4               5       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 v4 100      0.70      1.00               6               7       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 v5 100      0.50      0.75               8               9       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 v6 100      0.40      0.60              11              12       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 v7 100      0.25      0.50              15              16       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_non0_contr nRule nAll primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            1     1    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            2     2    2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            2     2    2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            2     2    2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            3     3    3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            4     4    4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7            4     4    4   FALSE      FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span><span class="va">d</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>,<span class="fl">70</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"num"</span>, formula <span class="op">=</span> <span class="op">~</span><span class="va">v1</span> <span class="op">-</span><span class="fl">1</span>,</span></span>
<span class="r-in"><span>primary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">DominanceRule</span>, <span class="va">NContributorsRule</span><span class="op">)</span>, maxN <span class="op">=</span> <span class="fl">4</span>, allDominance <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 18*2-&gt;7*3] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   v1 num dominant1 dominant2 max1contributor max2contributor n_contr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 v1 100      1.00      1.00               1              NA       1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 v2 100      0.90      1.00               2               3       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 v3 100      0.80      1.00               4               5       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 v4 100      0.70      1.00               6               7       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 v5 100      0.50      0.75               8               9       3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 v6 100      0.40      0.60              11              12       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 v7 100      0.25      0.50              15              16       4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n_non0_contr nRule nAll primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            1     1    1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            2     2    2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            2     2    2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4            2     2    2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5            3     3    3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6            4     4    4    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7            4     4    4    TRUE       TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">d2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"d2"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>   <span class="co"># Data considered as microdata</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d2</span><span class="op">$</span><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d2</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Hierarchical region variables are detected automatically -&gt; same output column</span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span>data <span class="op">=</span> <span class="va">d2</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">95</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"v"</span>, </span></span>
<span class="r-in"><span>                      dimVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"county"</span>, <span class="st">"k_group"</span><span class="op">)</span>, allDominance <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 44*4-&gt;11*5] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: ..............</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region          v dominant1 dominant2 max1contributor max2contributor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       1  3.1878024 0.3302228 0.5721194              23              34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      10 10.0786664 0.4667651 0.6256381              44              43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     300 27.3487153 0.1414174 0.2581709              18              16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       4  1.4198773 0.4753900 0.8495649              35              24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     400 10.9990663 0.4277063 0.5732848              44              43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       5  6.7724116 0.4200770 0.7788224              26               3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       6  7.2219335 0.4421335 0.8494272              16               6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       8  9.6670903 0.4000773 0.5656266              18               8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   Total 38.3477816 0.1226765 0.2235319              44              18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      A  2.2674025 0.4642692 0.8043581              23              34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      B  1.4198773 0.4753900 0.8495649              35              24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      C  3.3067218 0.7347372 0.8781498               3              36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      D  3.4656899 0.8208854 0.9100334              26              15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      E  3.9154941 0.8154931 0.9947520              16              27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      F  3.3064395 0.8896119 0.9645732               6              17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      G  5.5201407 0.7006312 0.9352912              18              29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      H  4.1469497 0.3859174 0.7650037               8              30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      I  0.9203999 0.5125673 0.7554309               9              20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      J  3.0271572 0.5289543 0.9056270              43              21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      K  7.0515092 0.6671437 0.8796339              44              11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    n_contr n_non0_contr primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        8            8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        8            8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       32           32   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        4            4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       12           12   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        8            8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        8            8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        8            8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       44           44   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       4            4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       4            4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       4            4    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       4            4    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       4            4    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       4            4    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16       4            4    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17       4            4   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18       4            4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19       4            4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20       4            4   FALSE      FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Formula. Hierarchical variables still detected automatically.</span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span>data <span class="op">=</span> <span class="va">d2</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">95</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"v"</span>, </span></span>
<span class="r-in"><span>                      formula <span class="op">=</span> <span class="op">~</span><span class="va">main_income</span> <span class="op">*</span> <span class="va">k_group</span> <span class="op">+</span> <span class="va">region</span> <span class="op">+</span> <span class="va">county</span> <span class="op">-</span> <span class="va">k_group</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 44*5-&gt;44*6] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: .::::::::::::::::::::</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    main_income region          v primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        Total  Total 38.3477816   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   assistance  Total  9.4825828   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        other  Total  9.7414023   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     pensions  Total  9.3008137   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        wages  Total  9.8229828   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        Total      A  2.2674025   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        Total      B  1.4198773   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        Total      C  3.3067218    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        Total      D  3.4656899    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10       Total      E  3.9154941    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11       Total      F  3.3064395    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12       Total      G  5.5201407    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       Total      H  4.1469497   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       Total      I  0.9203999   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       Total      J  3.0271572   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16       Total      K  7.0515092   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17       Total      1  3.1878024   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18       Total      4  1.4198773   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19       Total      5  6.7724116   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20       Total      6  7.2219335   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21       Total      8  9.6670903   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22       Total     10 10.0786664   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23  assistance    300  8.4123940   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24  assistance    400  1.0701889    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25       other    300  7.5726446   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26       other    400  2.1687577   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27    pensions    300  2.9519862   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28    pensions    400  6.3488275    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29       wages    300  8.4116906   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30       wages    400  1.4112922    TRUE       TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With hierarchies created manually</span></span></span>
<span class="r-in"><span><span class="va">ml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"@"</span>, <span class="st">"@@"</span>, <span class="st">"@@@"</span>, <span class="st">"@@@"</span>, <span class="st">"@@@"</span>, <span class="st">"@@"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>        codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Total"</span>, <span class="st">"not_assistance"</span>, <span class="st">"other"</span>, <span class="st">"pensions"</span>, <span class="st">"wages"</span>, <span class="st">"assistance"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span>data <span class="op">=</span> <span class="va">d2</span>, n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">95</span><span class="op">)</span>, numVar <span class="op">=</span> <span class="st">"v"</span>, </span></span>
<span class="r-in"><span>                      hierarchies <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>main_income <span class="op">=</span> <span class="va">ml</span>, k_group <span class="op">=</span> <span class="st">"Total_Norway"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 44*3-&gt;8*4] Checking ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: ...............</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       main_income      k_group         v primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           Total Total_Norway 38.347782   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           Total          300 27.348715   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           Total          400 10.999066   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  not_assistance Total_Norway 28.865199   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  not_assistance          300 18.936321   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  not_assistance          400  9.928877   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      assistance Total_Norway  9.482583   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      assistance          300  8.412394   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      assistance          400  1.070189    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          other Total_Norway  9.741402   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          other          300  7.572645   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12          other          400  2.168758   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13       pensions Total_Norway  9.300814   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14       pensions          300  2.951986   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       pensions          400  6.348828    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16          wages Total_Norway  9.822983   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17          wages          300  8.411691   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18          wages          400  1.411292    TRUE       TRUE</span>
<span class="r-in"><span>                      </span></span>
<span class="r-in"><span><span class="co"># With contributorVar and p% rule    </span></span></span>
<span class="r-in"><span><span class="fu">SuppressDominantCells</span><span class="op">(</span>data<span class="op">=</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"magnitude1"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                      numVar <span class="op">=</span> <span class="st">"value"</span>, </span></span>
<span class="r-in"><span>                      dimVar<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector4"</span>, <span class="st">"geo"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                      contributorVar <span class="op">=</span> <span class="st">"company"</span>,</span></span>
<span class="r-in"><span>                      pPercent <span class="op">=</span> <span class="fl">10</span>, </span></span>
<span class="r-in"><span>                      allDominance <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>                       </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [preAggregate 20*6-&gt;20*5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 20*5-&gt;10*5] Checking .....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: .........</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          sector4      geo freq value dominant1 dominant2 max1contributor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          Total    Total   20 462.3 0.5405581 0.8866537               A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          Total  Iceland    4  37.1 0.7115903 0.9487871               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          Total Portugal    8 162.5 0.4855385 0.9526154               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          Total    Spain    8 262.7 0.6623525 0.8705748               A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    Agriculture    Total    4 240.2 0.7181515 1.0000000               A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    Agriculture  Iceland    0   0.0 0.0000000 0.0000000            &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    Agriculture Portugal    2 100.4 0.7559761 1.0000000               A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8    Agriculture    Spain    2 139.8 0.6909871 1.0000000               A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  Entertainment    Total    6 131.5 0.5885932 0.8577947               A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 Entertainment  Iceland    1  16.8 1.0000000 1.0000000               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 Entertainment Portugal    2   9.4 0.7553191 1.0000000               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 Entertainment    Spain    3 105.3 0.7350427 0.8907882               A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  Governmental    Total    4  32.8 0.6585366 0.8567073               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  Governmental  Iceland    0   0.0 0.0000000 0.0000000            &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  Governmental Portugal    2  23.6 0.9152542 1.0000000               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  Governmental    Spain    2   9.2 0.7065217 1.0000000               C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17      Industry    Total    6  57.8 0.6107266 0.9083045               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18      Industry  Iceland    3  20.3 0.4729064 0.9064039               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      Industry Portugal    2  29.1 0.8831615 1.0000000               B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      Industry    Spain    1   8.4 1.0000000 1.0000000               C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    max2contributor n_contr n_non0_contr primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                B       4            4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                C       3            3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                A       3            3    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                B       4            4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                B       2            2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6             &lt;NA&gt;       0            0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                B       2            2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                B       2            2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                B       4            4   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10            &lt;NA&gt;       1            1    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11               D       2            2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12               C       3            3   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13               C       3            3   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14            &lt;NA&gt;       0            0   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15               D       2            2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16               D       2            2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17               C       3            3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18               C       3            3   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19               D       2            2    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20            &lt;NA&gt;       1            1    TRUE       TRUE</span>
<span class="r-in"><span>                      </span></span>
<span class="r-in"><span>                      </span></span>
<span class="r-in"><span><span class="co"># Using formula followed by FormulaSelection                        </span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">SuppressDominantCells</span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"magnitude1"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                                numVar <span class="op">=</span> <span class="st">"value"</span>, </span></span>
<span class="r-in"><span>                                formula <span class="op">=</span> <span class="op">~</span><span class="va">sector2</span> <span class="op">*</span> <span class="va">geo</span> <span class="op">+</span> <span class="va">sector4</span> <span class="op">*</span> <span class="va">eu</span>, </span></span>
<span class="r-in"><span>                                contributorVar <span class="op">=</span> <span class="st">"company"</span>, </span></span>
<span class="r-in"><span>                                k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">80</span>, <span class="fl">99</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [preAggregate 20*6-&gt;20*7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 20*7-&gt;10*7] Checking .....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: .........:::::</span>
<span class="r-in"><span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/FormulaSelection.html" class="external-link">FormulaSelection</a></span><span class="op">(</span><span class="va">output</span>, <span class="op">~</span><span class="va">sector2</span> <span class="op">*</span> <span class="va">geo</span><span class="op">)</span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         geo sector4 freq value primary suppressed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     Total   Total   20 462.3   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     Total private   16 429.5   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     Total  public    4  32.8   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Iceland   Total    4  37.1   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  Portugal   Total    8 162.5   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     Spain   Total    8 262.7   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  Iceland private    4  37.1   FALSE      FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 Portugal private    6 138.9   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15    Spain private    6 253.5   FALSE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 Portugal  public    2  23.6    TRUE       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    Spain  public    2   9.2    TRUE       TRUE</span>
<span class="r-in"><span>                      </span></span>
<span class="r-in"><span>                      </span></span>
<span class="r-in"><span><span class="co"># This example is similar to the one in the documentation of tables_by_formulas,  </span></span></span>
<span class="r-in"><span><span class="co"># but it uses SuppressDominantCells with the pPercent and contributorVar parameters.  </span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/tables_by_formulas.html" class="external-link">tables_by_formulas</a></span><span class="op">(</span><span class="fu"><a href="https://statisticsnorway.github.io/ssb-ssbtools/reference/SSBtoolsData.html" class="external-link">SSBtoolsData</a></span><span class="op">(</span><span class="st">"magnitude1"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   table_fun <span class="op">=</span> <span class="va">SuppressDominantCells</span>, </span></span>
<span class="r-in"><span>                   table_formulas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>table_1 <span class="op">=</span> <span class="op">~</span><span class="va">region</span> <span class="op">*</span> <span class="va">sector2</span>, </span></span>
<span class="r-in"><span>                                         table_2 <span class="op">=</span> <span class="op">~</span><span class="va">region1</span><span class="op">:</span><span class="va">sector4</span> <span class="op">-</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span>                                         table_3 <span class="op">=</span> <span class="op">~</span><span class="va">region</span> <span class="op">+</span> <span class="va">sector4</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   substitute_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geo"</span>, <span class="st">"eu"</span><span class="op">)</span>, region1 <span class="op">=</span> <span class="st">"eu"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   collapse_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sector <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sector2"</span>, <span class="st">"sector4"</span><span class="op">)</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   dominanceVar  <span class="op">=</span> <span class="st">"value"</span>, pPercent <span class="op">=</span> <span class="fl">10</span>, contributorVar <span class="op">=</span> <span class="st">"company"</span><span class="op">)</span>                       </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [preAggregate 20*6-&gt;20*7]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [extraAggregate 20*7-&gt;10*7] Checking .....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GaussSuppression_numttHTT: ........::::</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      region        sector freq value primary suppressed table_1 table_2 table_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     Total         Total   20 462.3   FALSE      FALSE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Iceland         Total    4  37.1    TRUE       TRUE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Portugal         Total    8 162.5    TRUE       TRUE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     Spain         Total    8 262.7   FALSE      FALSE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        EU         Total   16 425.2   FALSE       TRUE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     nonEU         Total    4  37.1    TRUE       TRUE    TRUE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     Total       private   16 429.5   FALSE      FALSE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     Total        public    4  32.8   FALSE      FALSE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     Total   Agriculture    4 240.2    TRUE       TRUE   FALSE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    Total Entertainment    6 131.5   FALSE      FALSE   FALSE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    Total  Governmental    4  32.8   FALSE      FALSE   FALSE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    Total      Industry    6  57.8   FALSE       TRUE   FALSE   FALSE    TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  Iceland       private    4  37.1    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 Portugal       private    6 138.9    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 Portugal        public    2  23.6    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16    Spain       private    6 253.5   FALSE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    Spain        public    2   9.2    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18       EU       private   12 392.4   FALSE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19       EU        public    4  32.8   FALSE      FALSE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20    nonEU       private    4  37.1    TRUE       TRUE    TRUE   FALSE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21       EU   Agriculture    4 240.2    TRUE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22       EU Entertainment    5 114.7   FALSE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23       EU  Governmental    4  32.8   FALSE      FALSE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24       EU      Industry    3  37.5   FALSE      FALSE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25    nonEU Entertainment    1  16.8    TRUE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26    nonEU      Industry    3  20.3   FALSE       TRUE   FALSE    TRUE   FALSE</span>
<span class="r-in"><span>                      </span></span>
<span class="r-in"><span>                      </span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud, Daniel Lupp.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

